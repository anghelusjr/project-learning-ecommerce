<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  

  <script>
      // const xhr = new XMLHttpRequest();
      // xhr.addEventListener('load', () =>{
      //   console.log(xhr.response);
      // })

      // xhr.open('GET', 'https://supersimplebackend.dev/greeting');
      // xhr.send();

      // function helloFetchText(){
      //   const helloText =  fetch('https://supersimplebackend.dev/greeting').then((response) =>{
      //   return response.text();
      //   }).then((responseText) => {
      //     console.log(responseText);
      //   }).catch((err)=>{
      //     console.log('Unexpected error. Try again later.');
      //   })

      //   return helloText;
      // }


      /*
      helloFetchText().then(() =>{
        console.log('next step');
      })
     */


      // async function loadPage(){
      //   // throw 'Errrrrrr';
      //   let response = await fetch('');
      //   let text = await fetch('')
      //   if(response.status >=400){
      //     console.log(response);
      //   }else{
      //   response = await fetch('https://supersimplebackend.dev/greeting');
      //   text = await response.text();
      //   console.log(text)
      //   }
      // }

      // loadPage();



      async function postGreeting() {
        try{
            const response = await fetch('https://supersimplebackend.dev/greeting', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            }
          });

            if(response.status >= 400){
              throw response;
            }

            const text = await response.text();
            console.log(text);


        }catch(error){
          if(error.status === 400){
            const errorMessage = await error.json();
            console.log(errorMessage);
          }else{
             console.log('Network error. Please try again later.');
          }
        }
      }

      postGreeting();

      
    
  </script>
</body>
</html>